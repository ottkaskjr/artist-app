<%- include('../partials/adminHeader') %>
<%- include('../partials/adminNav') %>
  

  <div id="main-container" class="">
    <div class="txt-c">
      <h1 class="admin-section-title">Lehekülje päis</h1>
    </div>
    
    <div class="txt-c">
      <h1 class="admin-section-title">Avasektsioon</h1>
      <div>
        <%# HIDE SECTION %>
        <div class="my-2 edit-section">
          <label id="hide-label" for="hide-title-section">Peida sektsioon
            <input type="checkbox" class="hover-pointer" name="hide" id="hide-title-section"
            <% if (header.hidden_bg === true) { %>
              checked
            <% } %>
            >
          </label>
          <p class="p-info"><i>*Eemaldab antud sektsiooni koduleheküljelt</i></p>
        </div>

        <%# TITLE SECTION BG IMG + PREVIEW %>
        <p>Eelvaade</p>
        <div class="my-3 title-preview-parent">
          <a id="img-input-data" style="display: none;" data-name="<%= header.bg.img %>"></a>
          
          <div id="header-overlay-preview">
            <div id="bg-div-overlay" data-overlay="<%= header.bg.overlay %>">
            </div>
            <div id="text-container-preview" class="">
              <div id="heading-preview" class="txt-<%= header.bg.heading_pos.charAt(0) %> mx-3"><p><%= header.bg.heading %></p></div>
              <div id="intro-preview" class="txt-<%= header.bg.introduction_pos.charAt(0) %> mx-3 mt-3"><p><%= header.bg.introduction %></p></div>
            </div>
            <div id="bg-height-preview" class="admin-body"></div>
            <% if (header.bg.img != '') { %>
              <img style="border: 3px solid #fff;" id="about-img-preview" src="/<%= header.bg.img %>" alt="">
              
            <% } else { %>
              <img class="mb-1 d-none-admin" id="about-img-preview" src="" alt="">
            <% } %>
          </div>
          
          
        </div>
        <div>
          <button id="open-img-modal" class="mt-1 hover-pointer admin-btn-edit">Muuda</button>
        </div>

        <%# EDIT TITLE HEADING %>
        <%# name %>
      <div class="edit-section my-3 container-admin">
        <div class="est mb-1">
          <label for="main-heading-input">Pealkiri
            <input id="main-heading-input" type="text" name="heading" data-preview="heading-preview" placeholder="Tere tulemast" value="<%= header.bg.heading %>">
          </label>
        </div>
        <div class="eng mb-1">
          <label for="main-heading-input-eng">Title
            <input id="main-heading-input-eng" type="text" name="heading_eng" placeholder="Welcome" value="<%= header_eng.bg.heading %>">
          </label>
        </div>
        <%# position %>
        <div class="mb-1">
          <label for="main-heading-pos">Asetus
            <select data-value="<%= header.bg.heading_pos %>" name="heading_pos" class="hover-pointer" id="main-heading-pos">
              <option value="left"
                <% if (header.bg.heading_pos === 'left') { %>
                  selected
                <% } %>
              >Vasakul</option>
              <option value="center"
                <% if (header.bg.heading_pos === 'center') { %>
                  selected
                <% } %>
              >Keskel</option>
              <option value="right"
                <% if (header.bg.heading_pos === 'right') { %>
                  selected
                <% } %>
              >Paremal</option>
            </select>
          </label>
        </div>
        <%# color %>
        <div class="mb-1">
          <label for="main-heading-color">Värv
            <input name="heading_color" type="color" class="hover-pointer" id="main-heading-color" value="<%= header.bg.heading_color %>">
          </label>
        </div>
        <%# size %>
        <div>
          <label for="main-heading-size">Teksti suurus
            <input name="heading_size" type="number" class="number-input" id="main-heading-size" min="10" max="100" value="<%= header.bg.heading_size %>"> px
          </label>
        </div>
      </div>
      <%# EDIT DESCRIPTION HEADING %>
        <%# description %>
        <div class="edit-section my-3 container-admin">
          <div class="est mb-1">
            <label for="main-introduction-input">Sissejuhatus
              <input id="main-introduction-input" type="text" data-preview="intro-preview" name="introduction" placeholder="Sissejuhatus" value="<%= header.bg.introduction %>">
            </label>
          </div>
          <div class="eng mb-1">
            <label for="main-introduction-input-eng">Introduction
              <input id="main-introduction-input-eng" type="text" name="introduction_eng" placeholder="Introduction" value="<%= header_eng.bg.introduction %>">
            </label>
          </div>
          <%# introduction position %>
          <div class="mb-1">
            <label for="main-introduction-pos">Asetus
              <select data-value="<%= header.bg.introduction_pos %>" name="introduction_pos" class="hover-pointer" id="main-introduction-pos">
                <option value="left"
                  <% if (header.bg.introduction_pos === 'left') { %>
                    selected
                  <% } %>
                >Vasakul</option>
                <option value="center"
                  <% if (header.bg.introduction_pos === 'center') { %>
                    selected
                  <% } %>
                >Keskel</option>
                <option value="right"
                  <% if (header.bg.introduction_pos === 'right') { %>
                    selected
                  <% } %>
                >Paremal</option>
              </select>
            </label>
          </div>
          <%# color %>
          <div class="mb-1">
            <label for="main-introduction-color">Värv
              <input name="introduction_color" type="color" class="hover-pointer" id="main-introduction-color" value="<%= header.bg.introduction_color %>">
            </label>
          </div>
          <%# size %>
          <div>
            <label for="main-introduction-size">Teksti suurus
              <input name="introduction_size" type="number" class="number-input" id="main-introduction-size" min="5" max="50" value="<%= header.bg.introduction_size %>"> px
            </label>
          </div>

          
          <%# OVERLAY OPACITY %>
          <div>
              <p>*Korrigeeri pildi heledust, et parandada teksti loetavust</p>
              
              <div class="range-slider-l">
                <label for="main-bg-overlay">Pildi heledus
                  <input type="range" min="-100" max="100" value="<%= header.bg.overlay %>" class="slider" id="title-overlay-slider">
                </label>
                <div>
                  <p id="slider-output"></p>
                </div>
              </div>
              <%#
              <input name="overlay" type="number" class="number-input" id="main-bg-overlay" min="0" max="100" value="header.bg.overlay"> %>
          </div>

          <%# TITLE SECTION HEIGHT %>
          <div class="my-3">
            <label for="title-section-height">Tervitussektsiooni kõrgus
              <input name="title-section-height" type="number" class="number-input" id="title-section-height" min="30" max="100" value="<%= header.bg.height %>"> % browseri kõrgusest
            </label>
          </div>
        </div>
        
      <div><button class="hover-pointer admin-btn-save" id="save-title">Salvesta</button></div>
      </div>
    </div>

    <%# CAROUSEL SLIDES %>
    <% const modules = ['Kontserdid', 'Uudised'] %>
    <% const modules_eng = ['concerts', 'news'] %>
    <% const getModuleName = (item) => { %>
      <% return item.heading %>
    <% } %>
    <% const checkModule = (moduleName, Module) => { %>
      <% if (moduleName != Module) { %>
        <% return 'd-none-admin' %>
      <% } %>
    <% } %>
    <div class="txt-c container-admin">
      <h1 class="admin-section-title">Slaidid</h1>
      <%# HIDE SECTION %>
      <div class="my-2 edit-section">
        <label id="hide-label" for="hide-carousel-section">Peida sektsioon
          <input type="checkbox" class="hover-pointer" name="hide" id="hide-carousel-section"
          <% if (header.hidden_car === true) { %>
            checked
          <% } %>
          >
        </label>
        <p class="p-info"><i>*Eemaldab antud sektsiooni koduleheküljelt</i></p>
        <button class="hover-pointer admin-btn-save" id="save-carousel">Salvesta</button>
      </div>
      <div class="mb-3">
        <button id="add-slide" class="hover-pointer admin-btn-add">Lisa slaid</button>
      </div>
      <%# SLIDES CONTAINER %>
      <div id="slides-container">
        <% for (let i = 0; i < header.slides.length; i++) { %>
          <%# SLIDE %>
          <div id="slide-container-<%= header.slides[i].slide_id %>" class="slide-container edit-container mb-2">
            <div id="slide-<%= header.slides[i].slide_id %>" data-bg="<%= header.slides[i].bg %>" class="slide-div mt-1">
              <%# overlay %>
              <div id="slide-overlay-<%= header.slides[i].slide_id %>" class="slide-overlay" data-overlay="<%= header.slides[i].overlay %>"></div>
              <div id="slide-content-<%= header.slides[i].slide_id %>" class="slide-content abs-<%= header.slides[i].content_pos.charAt(0) %> txt-<%= header.slides[i].content_pos.charAt(0) %>">
                <%# content %>
                <div class="slide-content-div">
                  <%# heading %>
                  <div>
                    <p id="slide-heading-<%= header.slides[i].slide_id %>" class="slide-heading"><%= header.slides[i].heading %></p>
                  </div>
                  <%# subheading %>
                  <div>
                    <p id="1-slide-subheading-<%= header.slides[i].slide_id %>" class="slide-subheading"><%= header.slides[i].subHeadings[0] %></p>
                    <p id="2-slide-subheading-<%= header.slides[i].slide_id %>" class="slide-subheading"><%= header.slides[i].subHeadings[1] %></p>
                  </div>
                  <%# button %>
                  <div>
                    <button class="admin-btn-sample slide-button slide-button-<%= header.slides[i].slide_id %> hover-pointer"><%= header.slides[i].button %></button>
                  </div>
                </div>
                
              </div>
            </div>

            <div class="edit-slide-div my-2">
              <%# OVERLAY %>
              <div>
                <p>*Korrigeeri pildi heledust, et parandada teksti loetavust</p>
                
                <div class="range-slider-m">
                  <label for="slide-bg-overlay-<%= header.slides[i].slide_id %>">Pildi heledus
                    <input type="range" min="-100" max="100" value="<%= header.slides[i].overlay %>" class="slider" id="slide-bg-overlay-<%= header.slides[i].slide_id %>">
                  </label>
                  <div>
                    <p id="slider-output-<%= header.slides[i].slide_id %>"></p>
                  </div>
                </div>
              </div>

              <%# MODULE %>
              <%# currently %>
              <div>
                <p>Aktiivne: <span id="active-module-<%= header.slides[i].slide_id %>"><%= header.slides[i].module %></span> - <span id="active-item-<%= header.slides[i].slide_id %>"><%= header.slides[i].heading %></span></p>
              </div>
              <div>
                <label for="select-module-<%= header.slides[i].slide_id %>">Moodul</label>
                <select class="hover-pointer select-module" id="select-module-<%= header.slides[i].slide_id %>" data-module="" name="module">
                  
                  <option value="" disabled
                  <% if (header.slides[i].module === '') { %>
                    selected
                  <% } %>
                  >Vali moodul</option>
                  <% for (let j = 0; j < modules_eng.length; j++) { %>
                    <option data-module="<%= modules_eng[j] %>" value="<%= modules_eng[j] %>"
                      <% if (modules_eng[j] === header.slides[i].module) { %>
                      selected
                      <% } %>
                      ><%= modules[j] %></option>
                  <% } %>
                  
                </select> 

                 <%# module items %>
                <span id="concerts-items-<%= header.slides[i].slide_id %>" class="concerts-items <%= checkModule('concerts', header.slides[i].module) %>" data-id="<%= header.slides[i].slide_id %>">
                  <label class="ml-1" for="select-concert">Kontsert:</label>
                  <select class="hover-pointer select-concert" id="select-concert-<%= header.slides[i].slide_id %>" name="module">
                    <% for (let k = 0; k < concerts.concerts.length; k++) { %>
                      <option value="" data-module-id="<%= concerts.concerts[k].id %>" data-module="concerts" data-slide-id="<%= header.slides[i].slide_id %>" data-img="<%= concerts.concerts[k].img %>" data-heading="<%= concerts.concerts[k].heading %>" data-heading-eng="<%= concerts_eng.concerts[k].heading %>" 
                      <% if (concerts.concerts[k].id === header.slides[i].module_id) { %>
                        selected
                      <% } %>
                      ><%= concerts.concerts[k].heading %></option>
                    <% } %>
                  </select> 
                </span>

                <span id="news-items-<%= header.slides[i].slide_id %>" class="news-items <%= checkModule('news', header.slides[i].module) %>" data-id="<%= header.slides[i].slide_id %>">
                  <label class="ml-1" for="select-article">Artikkel:</label>
                  <select class="hover-pointer select-article" id="select-article-<%= header.slides[i].slide_id %>" name="module">
                    <% for (let k = 0; k < news.articles.length; k++) { %>
                      <option value="" data-module-id="<%= news.articles[k].id %>" data-module="news" data-slide-id="<%= header.slides[i].slide_id %>" data-img="<%= news.articles[k].img %>" data-heading="<%= news.articles[k].heading %>" data-heading-eng="<%= news_eng.articles[k].heading %>"
                      <% if (news.articles[k].id === header.slides[i].module_id) { %>
                        selected
                      <% } %>
                      ><%= news.articles[k].heading %></option>
                    <% } %>
                  </select> 
                </span>
                
              </div>

              <%# CONTENT POSITION %>
              <div class="mt-2">
                <label for="slide-content-pos-<%= header.slides[i].slide_id %>">Asetus
                  <select data-value="<%= header.slides[i].content_pos %>" name="content_pos" class="hover-pointer" id="slide-content-pos-<%= header.slides[i].slide_id %>">
                    <option value="left"
                      <% if (header.slides[i].content_pos === 'left') { %>
                        selected
                      <% } %>
                    >Vasakul</option>
                    <option value="center"
                      <% if (header.slides[i].content_pos === 'center') { %>
                        selected
                      <% } %>
                    >Keskel</option>
                    <option value="right"
                      <% if (header.slides[i].content_pos === 'right') { %>
                        selected
                      <% } %>
                    >Paremal</option>
                  </select>
                </label>
              </div>

              <%# HEADING %>
              <div class="edit-section my-3">
                <div class="est mb-1">
                  <label for="slide-heading-input-<%= header.slides[i].slide_id %>">Pealkiri
                    <input id="slide-heading-input-<%= header.slides[i].slide_id %>" type="text" name="heading" data-preview="heading-preview" placeholder="Pealkiri" value="<%= header.slides[i].heading %>">
                  </label>
                </div>
                <div class="eng mb-1">
                  <label for="slide-heading-input-<%= header.slides[i].slide_id %>-eng">Title
                    <input id="slide-heading-input-<%= header.slides[i].slide_id %>-eng" type="text" name="heading_eng" placeholder="Heading" value="<%= header_eng.slides[i].heading %>">
                  </label>
                </div>
              </div>
              <%# SUBHEADINGS %>
              <div class="edit-section my-3">
                <%# first subheading %>
                <div class="est mb-1">
                  <p>Alapealkirja eemaldamiseks kustuta väli</p> 
                  <label for="1-slide-subheading-input-<%= header.slides[i].slide_id %>">Alapealkiri 1
                    <input id="1-slide-subheading-input-<%= header.slides[i].slide_id %>" type="text" name="subheading" data-preview="subheading-preview" placeholder="Kava/esinejad/tsitaat jms" value="<%= header.slides[i].subHeadings[0] %>">
                  </label>
                </div>
                <div class="eng mb-1">
                  <label for="1-slide-subheading-input-<%= header.slides[i].slide_id %>-eng">Subheading 1
                    <input id="1-slide-subheading-input-<%= header.slides[i].slide_id %>-eng" type="text" name="subheading_eng" placeholder="Program/performers/quote etc" value="<%= header_eng.slides[i].subHeadings[0] %>">
                  </label>
                </div>
                <%# second subheading %>
                <div class="est mt-2 mb-1">
                  <label for="2-slide-subheading-input-<%= header.slides[i].slide_id %>">Alapealkiri 2
                    <input id="2-slide-subheading-input-<%= header.slides[i].slide_id %>" type="text" name="subheading" data-preview="subheading-preview" placeholder="Kava/esinejad/tsitaat jms" value="<%= header.slides[i].subHeadings[1] %>">
                  </label>
                </div>
                <div class="eng mb-1">
                  <label for="2-slide-subheading-input-<%= header.slides[i].slide_id %>-eng">Subheading 2
                    <input id="2-slide-subheading-input-<%= header.slides[i].slide_id %>-eng" type="text" name="subheading_eng" placeholder="Program/performers/quote etc" value="<%= header_eng.slides[i].subHeadings[1] %>">
                  </label>
                </div>
              </div>

              <%# TEXT SIZE %>
              <div class="mb-2">
                <label for="slide-text-size-<%= header.slides[i].slide_id %>">Teksti suurus
                  <input name="text_size" type="number" class="number-input" id="slide-text-size-<%= header.slides[i].slide_id %>" min="50" max="200" value="<%= header.slides[i].text_size %>"> %
                </label>
              </div>

              <%# TEXT COLOR %>
              <div class="mb-1">
                <label for="slide-text-color-<%= header.slides[i].slide_id %>">Teksti värv
                  <input name="text_color" type="color" class="hover-pointer" id="slide-text-color-<%= header.slides[i].slide_id %>" value="<%= header.slides[i].text_color %>">
                </label>
              </div>

              <%# BUTTON %>
              
              <div class="edit-section my-3">
                <%# btn text %>
                <div class="est mb-1">
                  <label for="slide-btn-input-<%= header.slides[i].slide_id %>">Nupu tekst
                    <input id="slide-btn-input-<%= header.slides[i].slide_id %>" type="text" name="button" data-preview="button-preview" placeholder="Loe lähemalt" value="<%= header.slides[i].button %>">
                  </label>
                </div>
                <div class="eng mb-1">
                  <label for="slide-btn-input-<%= header.slides[i].slide_id %>-eng">Button text
                    <input id="slide-btn-input-<%= header.slides[i].slide_id %>-eng" type="text" name="button_eng" placeholder="Read more" value="<%= header_eng.slides[i].button %>">
                  </label>
                </div>
                <%# btn text color %>
                <div class="mb-1">
                  <label for="slide-btn-color-<%= header.slides[i].slide_id %>">Nupu teksti värv
                    <input name="button_color" type="color" class="hover-pointer" id="slide-btn-color-<%= header.slides[i].slide_id %>" value="<%= header.slides[i].button_color %>">
                  </label>
                </div>
                <%# btn bg %>
                <div class="mb-1">
                  <label for="slide-btn-bg-<%= header.slides[i].slide_id %>">Nupu taust
                    <input name="button_bg" type="color" class="hover-pointer" id="slide-btn-bg-<%= header.slides[i].slide_id %>" value="<%= header.slides[i].button_bg %>">
                  </label>
                </div>
              </div>
              
              <%# SHOW/HIDE SLIDE %>
              <div class="my-2 edit-section">
                <label class="hover-pointer" id="hide-slide-<%= header.slides[i].slide_id %>-label" for="hide-slide-<%= header.slides[i].slide_id %>">Peida slaid
                  <input type="checkbox" class="hover-pointer" name="hide" id="hide-slide-<%= header.slides[i].slide_id %>"
                  <% if (header.slides[i].hidden === true) { %>
                    checked
                  <% } %>
                  >
                </label>
              </div>


              
              <%# SAVE SLIDE %>
              <div class="mt-3">
                <button data-module-id="<%= header.slides[i].module_id %>" data-module="<%= header.slides[i].module %>" data-id="<%= header.slides[i].slide_id %>" data-img="<%= header.slides[i].bg %>"  id="save-slide-<%= header.slides[i].slide_id %>" class="save-slide hover-pointer admin-btn-save">Salvesta</button>
              </div>

              <%# REMOVE SLIDE %>
              <div class="mt-3">
                <button data-id="<%= header.slides[i].slide_id %>" id="remove-slide-<%= header.slides[i].slide_id %>" class="remove-slide hover-pointer admin-btn-remove">Eemalda</button>
              </div>
            </div>

          </div>
        <% } %>
      </div>
    </div>


  </div>
  


   <%# MODAL %>
   <div id="select-img-modal" class="modal-closed modal">
    <div class="modal-container modal-l">
      <div class="close-modal data-dismiss"><div><a>X</a></div></div>
      <div class="modal-body txt-c">
        <h3>Vali/eemalda pilt</h3>
        <%# IMAGES %>
        <div id="modal-img-container">
        </div>
      </div>
    </div>
  </div>

<script src="/slider.js"></script>
<script src="/adminHeader.js"></script>
<script src="/adminSlides.js"></script>
<script src="/pickImg.js"></script>

<%- include('../partials/adminFooter') %>